name: Deploy Documentation

on:
  push:
    branches: [ main ]
    paths:
      - 'docs/**'
      - '.github/workflows/docs-deploy.yml'

jobs:
  deploy-docs:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: Install dependencies
      run: |
        npm install -g docsify-cli
        
    - name: Create docsify structure
      run: |
        mkdir -p docs-site
        cd docs-site
        
        # Create index.html
        cat > index.html << 'EOF'
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>Return to Moria Server Manager - Documentation</title>
          <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
          <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
          <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
        </head>
        <body>
          <div id="app"></div>
          <script>
            window.$docsify = {
              name: 'Return to Moria Server Manager',
              repo: 'your-username/ReturnToMoria_DedicatedServer',
              loadSidebar: true,
              subMaxLevel: 3,
              auto2top: true,
              search: {
                maxAge: 86400000,
                paths: 'auto',
                placeholder: 'Search',
                noData: 'No Results!',
                depth: 6
              }
            }
          </script>
          <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
          <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
        </body>
        </html>
        EOF
        
        # Create _sidebar.md
        cat > _sidebar.md << 'EOF'
        * [Home](/)
        * [Installation](installation.md)
        * [Configuration](configuration.md)
        * [API Reference](api/README.md)
        * [Contributing](contributing.md)
        EOF
        
        # Create README.md
        cat > README.md << 'EOF'
        # Return to Moria Server Manager
        
        Welcome to the documentation for Return to Moria Server Manager.
        
        ## Quick Start
        
        1. Download the latest release
        2. Extract the files
        3. Run ReturnToMoriaServerManager.exe
        4. Follow the setup wizard
        
        ## Features
        
        - 🚀 Automatic SteamCMD installation
        - ⚙️ Advanced server configuration
        - 📊 Real-time server monitoring
        - 🎮 World management tools
        
        ## Support
        
        - [GitHub Issues](https://github.com/your-username/ReturnToMoria_DedicatedServer/issues)
        - [Documentation](https://your-username.github.io/ReturnToMoria_DedicatedServer/)
        EOF
        
    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./docs-site
        cname: your-username.github.io 